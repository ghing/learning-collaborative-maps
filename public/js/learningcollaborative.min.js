(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.LearningCollaborative = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _AppDispatcher=require("../dispatcher/AppDispatcher"),_AppDispatcher2=_interopRequireDefault(_AppDispatcher),_LearningCollaborativeConstants=require("../constants/LearningCollaborativeConstants"),_LearningCollaborativeConstants2=_interopRequireDefault(_LearningCollaborativeConstants),LearningCollaborativeActions={setSchools:function(e){_AppDispatcher2["default"].handleViewAction({actionType:_LearningCollaborativeConstants2["default"].SCHOOLS_SET,schools:e})},setAgencies:function(e){_AppDispatcher2["default"].handleViewAction({actionType:_LearningCollaborativeConstants2["default"].AGENCIES_SET,agencies:e})}};exports["default"]=LearningCollaborativeActions;
},{"../constants/LearningCollaborativeConstants":5,"../dispatcher/AppDispatcher":6}],2:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _objectAssign=require("object-assign"),_objectAssign2=_interopRequireDefault(_objectAssign),_leaflet=require("leaflet"),_leaflet2=_interopRequireDefault(_leaflet),_react=require("react"),_react2=_interopRequireDefault(_react),_SchoolStore=require("../stores/SchoolStore"),_SchoolStore2=_interopRequireDefault(_SchoolStore),_AgencyStore=require("../stores/AgencyStore"),_AgencyStore2=_interopRequireDefault(_AgencyStore),_MapDrawer=require("./MapDrawer"),_MapDrawer2=_interopRequireDefault(_MapDrawer),LearningCollaborativeMap=_react2["default"].createClass({displayName:"LearningCollaborativeMap",getInitialState:function(){return{schools:_SchoolStore2["default"].getAll(),agencies:_AgencyStore2["default"].getAll(),agencyColorScale:_AgencyStore2["default"].getColorScale()}},getDefaultProps:function(){return{center:[41.881832,-87.623177],initialZoom:13,markerOptions:{radius:2,fillColor:"#ff7800",color:"#000",weight:1,opacity:1,fillOpacity:.8}}},componentWillUnmount:function(){TodoStore.removeChangeListener(this._onChange),_AgencyStore2["default"].removeChangeListener(this._onChange)},render:function(){return _react2["default"].createElement("div",{className:"app-container"},_react2["default"].createElement("div",{ref:"mapContainer",className:"map-container"}),_react2["default"].createElement(_MapDrawer2["default"],{school:this.state.selectedSchool}))},componentDidMount:function(){_SchoolStore2["default"].addChangeListener(this._onChange),_AgencyStore2["default"].addChangeListener(this._onChange),this.state.schools.length&&this.state.agencies.length&&this._initializeMap()},componentDidUpdate:function(){this.state.schools.length&&this.state.agencies.length&&this._initializeMap()},_initializeMap:function(){var e=this,t=_leaflet2["default"].map(this.refs.mapContainer,{zoomControl:!1}).setView(this.props.center,this.props.initialZoom);new _leaflet2["default"].Control.Zoom({position:"bottomright"}).addTo(t),_leaflet2["default"].tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:'Map data Â© <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}).addTo(t);var o=_leaflet2["default"].geoJson(this.state.schools,{pointToLayer:function(t,o){var a=(0,_objectAssign2["default"])({},e.props.markerOptions),r=t.properties.programs,n=void 0,l=void 0;return r&&r.length&&(r.length>1?a.fillColor="black":(n=r[0].agency.split("/"),l=n[n.length-1],a.fillColor=_AgencyStore2["default"].getColorScale()(l))),_leaflet2["default"].circleMarker(o,a)},onEachFeature:function(t,o){o.on("click",function(o){e._handleClickSchool(t)})}}).addTo(t);t.fitBounds(o.getBounds())},_onChange:function(){this.setState({schools:_SchoolStore2["default"].getAll(),agencies:_AgencyStore2["default"].getAll()})},_handleClickSchool:function(e){this.setState({selectedSchool:e})}});exports["default"]=LearningCollaborativeMap;
},{"../stores/AgencyStore":8,"../stores/SchoolStore":9,"./MapDrawer":3,"leaflet":"leaflet","object-assign":"object-assign","react":"react"}],3:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=require("react"),_react2=_interopRequireDefault(_react),_SchoolDetail=require("./SchoolDetail"),_SchoolDetail2=_interopRequireDefault(_SchoolDetail),MapDrawer=_react2["default"].createClass({displayName:"MapDrawer",render:function(){return _react2["default"].createElement("div",{className:"map-drawer"},_react2["default"].createElement(_SchoolDetail2["default"],{school:this.props.school}))}});exports["default"]=MapDrawer;
},{"./SchoolDetail":4,"react":"react"}],4:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=require("react"),_react2=_interopRequireDefault(_react),SchoolDetail=_react2["default"].createClass({displayName:"SchoolDetail",render:function(){if(!this.props.school)return!1;var e=this.props.school.properties;return _react2["default"].createElement("div",{className:"school-detail"},_react2["default"].createElement("h2",null,e.FacilityName))}});exports["default"]=SchoolDetail;
},{"react":"react"}],5:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _keymirror=require("keymirror"),_keymirror2=_interopRequireDefault(_keymirror);exports["default"]=(0,_keymirror2["default"])({SCHOOLS_SET:null,AGENCIES_SET:null});
},{"keymirror":"keymirror"}],6:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_flux=require("flux"),_objectAssign=require("object-assign"),_objectAssign2=_interopRequireDefault(_objectAssign),AppDispatcher=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"handleViewAction",value:function(e){this.dispatch({source:"VIEW_ACTION",action:e})}}]),t}(_flux.Dispatcher);exports["default"]=new AppDispatcher;
},{"flux":"flux","object-assign":"object-assign"}],7:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.LearningCollaborativeMapApp=void 0;var _react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_xhrPromise=require("xhr-promise"),_xhrPromise2=_interopRequireDefault(_xhrPromise),_LearningCollaborativeActions=require("./actions/LearningCollaborativeActions"),_LearningCollaborativeActions2=_interopRequireDefault(_LearningCollaborativeActions),_LearningCollaborativeMap=require("./components/LearningCollaborativeMap"),_LearningCollaborativeMap2=_interopRequireDefault(_LearningCollaborativeMap),LearningCollaborativeMapApp=exports.LearningCollaborativeMapApp=function(e){var r=new _xhrPromise2["default"],a=new _xhrPromise2["default"];_reactDom2["default"].render(_react2["default"].createElement(_LearningCollaborativeMap2["default"],null),e.container),r.send({method:"GET",url:e.schoolsJSONURL}).then(function(e){_LearningCollaborativeActions2["default"].setSchools(e.responseText.features)}),a.send({method:"GET",url:e.agenciesJSONURL}).then(function(e){_LearningCollaborativeActions2["default"].setAgencies(e.responseText.features)})};
},{"./actions/LearningCollaborativeActions":1,"./components/LearningCollaborativeMap":2,"react":"react","react-dom":"react-dom","xhr-promise":"xhr-promise"}],8:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _objectAssign=require("object-assign"),_objectAssign2=_interopRequireDefault(_objectAssign),_d=require("d3"),_d2=_interopRequireDefault(_d),_events=require("events"),_AppDispatcher=require("../dispatcher/AppDispatcher"),_AppDispatcher2=_interopRequireDefault(_AppDispatcher),_LearningCollaborativeConstants=require("../constants/LearningCollaborativeConstants"),_LearningCollaborativeConstants2=_interopRequireDefault(_LearningCollaborativeConstants),CHANGE_EVENT="change",_agencies=[],_agencyColorScale=_d2["default"].scale.category20(),AgencyStore=(0,_objectAssign2["default"])({},_events.EventEmitter.prototype,{getAll:function(){return _agencies},getColorScale:function(){return _agencyColorScale},emitChange:function(){this.emit(CHANGE_EVENT)},addChangeListener:function(e){this.on(CHANGE_EVENT,e)},removeChangeListener:function(e){this.removeListener(CHANGE_EVENT,e)},dispatcherIndex:_AppDispatcher2["default"].register(function(e){var t=e.action,n=void 0;switch(t.actionType){case _LearningCollaborativeConstants2["default"].AGENCIES_SET:n=t.agencies,_agencies=n,_agencyColorScale.domain(_agencies.map(function(e){return e.properties.slug})),AgencyStore.emitChange()}return!0})});exports["default"]=AgencyStore;
},{"../constants/LearningCollaborativeConstants":5,"../dispatcher/AppDispatcher":6,"d3":"d3","events":10,"object-assign":"object-assign"}],9:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _objectAssign=require("object-assign"),_objectAssign2=_interopRequireDefault(_objectAssign),_events=require("events"),_AppDispatcher=require("../dispatcher/AppDispatcher"),_AppDispatcher2=_interopRequireDefault(_AppDispatcher),_LearningCollaborativeConstants=require("../constants/LearningCollaborativeConstants"),_LearningCollaborativeConstants2=_interopRequireDefault(_LearningCollaborativeConstants),CHANGE_EVENT="change",_schools=[],SchoolStore=(0,_objectAssign2["default"])({},_events.EventEmitter.prototype,{getAll:function(){return _schools},emitChange:function(){this.emit(CHANGE_EVENT)},addChangeListener:function(e){this.on(CHANGE_EVENT,e)},removeChangeListener:function(e){this.removeListener(CHANGE_EVENT,e)},dispatcherIndex:_AppDispatcher2["default"].register(function(e){var t=e.action,n=void 0;switch(t.actionType){case _LearningCollaborativeConstants2["default"].SCHOOLS_SET:n=t.schools,_schools=n,SchoolStore.emitChange()}return!0})});exports["default"]=SchoolStore;
},{"../constants/LearningCollaborativeConstants":5,"../dispatcher/AppDispatcher":6,"events":10,"object-assign":"object-assign"}],10:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,i,n,s,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(i=this._events[e],isUndefined(i))return!1;if(isFunction(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(isObject(i))for(s=Array.prototype.slice.call(arguments,1),o=i.slice(),n=o.length,r=0;n>r;r++)o[r].apply(this,s);return!0},EventEmitter.prototype.addListener=function(e,t){var i;if(!isFunction(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned&&(i=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var n=!1;return i.listener=t,this.on(e,i),this},EventEmitter.prototype.removeListener=function(e,t){var i,n,s,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=this._events[e],s=i.length,n=-1,i===t||isFunction(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(i)){for(r=s;r-- >0;)if(i[r]===t||i[r].listener&&i[r].listener===t){n=r;break}if(0>n)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],isFunction(i))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(isFunction(t))return 1;if(t)return t.length}return 0},EventEmitter.listenerCount=function(e,t){return e.listenerCount(t)};
},{}]},{},[7])(7)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9zcmMvYWN0aW9ucy9MZWFybmluZ0NvbGxhYm9yYXRpdmVBY3Rpb25zLmpzIiwianMvc3JjL2NvbXBvbmVudHMvTGVhcm5pbmdDb2xsYWJvcmF0aXZlTWFwLmpzIiwianMvc3JjL2NvbXBvbmVudHMvTWFwRHJhd2VyLmpzIiwianMvc3JjL2NvbXBvbmVudHMvU2Nob29sRGV0YWlsLmpzIiwianMvc3JjL2NvbnN0YW50cy9MZWFybmluZ0NvbGxhYm9yYXRpdmVDb25zdGFudHMuanMiLCJqcy9zcmMvZGlzcGF0Y2hlci9BcHBEaXNwYXRjaGVyLmpzIiwianMvc3JjL2xlYXJuaW5nY29sbGFib3JhdGl2ZS5qcyIsImpzL3NyYy9zdG9yZXMvQWdlbmN5U3RvcmUuanMiLCJqcy9zcmMvc3RvcmVzL1NjaG9vbFN0b3JlLmpzIiwibm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTs7QUNBQTs7QUNBQTs7QUNBQTs7QUNBQTs7QUNBQTs7QUNBQTs7QUNBQTs7QUNBQTs7QUNBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7XCJkZWZhdWx0XCI6ZX19T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIF9BcHBEaXNwYXRjaGVyPXJlcXVpcmUoXCIuLi9kaXNwYXRjaGVyL0FwcERpc3BhdGNoZXJcIiksX0FwcERpc3BhdGNoZXIyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FwcERpc3BhdGNoZXIpLF9MZWFybmluZ0NvbGxhYm9yYXRpdmVDb25zdGFudHM9cmVxdWlyZShcIi4uL2NvbnN0YW50cy9MZWFybmluZ0NvbGxhYm9yYXRpdmVDb25zdGFudHNcIiksX0xlYXJuaW5nQ29sbGFib3JhdGl2ZUNvbnN0YW50czI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTGVhcm5pbmdDb2xsYWJvcmF0aXZlQ29uc3RhbnRzKSxMZWFybmluZ0NvbGxhYm9yYXRpdmVBY3Rpb25zPXtzZXRTY2hvb2xzOmZ1bmN0aW9uKGUpe19BcHBEaXNwYXRjaGVyMltcImRlZmF1bHRcIl0uaGFuZGxlVmlld0FjdGlvbih7YWN0aW9uVHlwZTpfTGVhcm5pbmdDb2xsYWJvcmF0aXZlQ29uc3RhbnRzMltcImRlZmF1bHRcIl0uU0NIT09MU19TRVQsc2Nob29sczplfSl9LHNldEFnZW5jaWVzOmZ1bmN0aW9uKGUpe19BcHBEaXNwYXRjaGVyMltcImRlZmF1bHRcIl0uaGFuZGxlVmlld0FjdGlvbih7YWN0aW9uVHlwZTpfTGVhcm5pbmdDb2xsYWJvcmF0aXZlQ29uc3RhbnRzMltcImRlZmF1bHRcIl0uQUdFTkNJRVNfU0VULGFnZW5jaWVzOmV9KX19O2V4cG9ydHNbXCJkZWZhdWx0XCJdPUxlYXJuaW5nQ29sbGFib3JhdGl2ZUFjdGlvbnM7IiwiXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBfb2JqZWN0QXNzaWduPXJlcXVpcmUoXCJvYmplY3QtYXNzaWduXCIpLF9vYmplY3RBc3NpZ24yPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdEFzc2lnbiksX2xlYWZsZXQ9cmVxdWlyZShcImxlYWZsZXRcIiksX2xlYWZsZXQyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlYWZsZXQpLF9yZWFjdD1yZXF1aXJlKFwicmVhY3RcIiksX3JlYWN0Mj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCksX1NjaG9vbFN0b3JlPXJlcXVpcmUoXCIuLi9zdG9yZXMvU2Nob29sU3RvcmVcIiksX1NjaG9vbFN0b3JlMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9TY2hvb2xTdG9yZSksX0FnZW5jeVN0b3JlPXJlcXVpcmUoXCIuLi9zdG9yZXMvQWdlbmN5U3RvcmVcIiksX0FnZW5jeVN0b3JlMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9BZ2VuY3lTdG9yZSksX01hcERyYXdlcj1yZXF1aXJlKFwiLi9NYXBEcmF3ZXJcIiksX01hcERyYXdlcjI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTWFwRHJhd2VyKSxMZWFybmluZ0NvbGxhYm9yYXRpdmVNYXA9X3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlQ2xhc3Moe2Rpc3BsYXlOYW1lOlwiTGVhcm5pbmdDb2xsYWJvcmF0aXZlTWFwXCIsZ2V0SW5pdGlhbFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJue3NjaG9vbHM6X1NjaG9vbFN0b3JlMltcImRlZmF1bHRcIl0uZ2V0QWxsKCksYWdlbmNpZXM6X0FnZW5jeVN0b3JlMltcImRlZmF1bHRcIl0uZ2V0QWxsKCksYWdlbmN5Q29sb3JTY2FsZTpfQWdlbmN5U3RvcmUyW1wiZGVmYXVsdFwiXS5nZXRDb2xvclNjYWxlKCl9fSxnZXREZWZhdWx0UHJvcHM6ZnVuY3Rpb24oKXtyZXR1cm57Y2VudGVyOls0MS44ODE4MzIsLTg3LjYyMzE3N10saW5pdGlhbFpvb206MTMsbWFya2VyT3B0aW9uczp7cmFkaXVzOjIsZmlsbENvbG9yOlwiI2ZmNzgwMFwiLGNvbG9yOlwiIzAwMFwiLHdlaWdodDoxLG9wYWNpdHk6MSxmaWxsT3BhY2l0eTouOH19fSxjb21wb25lbnRXaWxsVW5tb3VudDpmdW5jdGlvbigpe1RvZG9TdG9yZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcih0aGlzLl9vbkNoYW5nZSksX0FnZW5jeVN0b3JlMltcImRlZmF1bHRcIl0ucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5fb25DaGFuZ2UpfSxyZW5kZXI6ZnVuY3Rpb24oKXtyZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJhcHAtY29udGFpbmVyXCJ9LF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7cmVmOlwibWFwQ29udGFpbmVyXCIsY2xhc3NOYW1lOlwibWFwLWNvbnRhaW5lclwifSksX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfTWFwRHJhd2VyMltcImRlZmF1bHRcIl0se3NjaG9vbDp0aGlzLnN0YXRlLnNlbGVjdGVkU2Nob29sfSkpfSxjb21wb25lbnREaWRNb3VudDpmdW5jdGlvbigpe19TY2hvb2xTdG9yZTJbXCJkZWZhdWx0XCJdLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMuX29uQ2hhbmdlKSxfQWdlbmN5U3RvcmUyW1wiZGVmYXVsdFwiXS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLl9vbkNoYW5nZSksdGhpcy5zdGF0ZS5zY2hvb2xzLmxlbmd0aCYmdGhpcy5zdGF0ZS5hZ2VuY2llcy5sZW5ndGgmJnRoaXMuX2luaXRpYWxpemVNYXAoKX0sY29tcG9uZW50RGlkVXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5zdGF0ZS5zY2hvb2xzLmxlbmd0aCYmdGhpcy5zdGF0ZS5hZ2VuY2llcy5sZW5ndGgmJnRoaXMuX2luaXRpYWxpemVNYXAoKX0sX2luaXRpYWxpemVNYXA6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9X2xlYWZsZXQyW1wiZGVmYXVsdFwiXS5tYXAodGhpcy5yZWZzLm1hcENvbnRhaW5lcix7em9vbUNvbnRyb2w6ITF9KS5zZXRWaWV3KHRoaXMucHJvcHMuY2VudGVyLHRoaXMucHJvcHMuaW5pdGlhbFpvb20pO25ldyBfbGVhZmxldDJbXCJkZWZhdWx0XCJdLkNvbnRyb2wuWm9vbSh7cG9zaXRpb246XCJib3R0b21yaWdodFwifSkuYWRkVG8odCksX2xlYWZsZXQyW1wiZGVmYXVsdFwiXS50aWxlTGF5ZXIoXCJodHRwOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nXCIse21heFpvb206MTgsYXR0cmlidXRpb246J01hcCBkYXRhIMKpIDxhIGhyZWY9XCJodHRwOi8vb3BlbnN0cmVldG1hcC5vcmdcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMnfSkuYWRkVG8odCk7dmFyIG89X2xlYWZsZXQyW1wiZGVmYXVsdFwiXS5nZW9Kc29uKHRoaXMuc3RhdGUuc2Nob29scyx7cG9pbnRUb0xheWVyOmZ1bmN0aW9uKHQsbyl7dmFyIGE9KDAsX29iamVjdEFzc2lnbjJbXCJkZWZhdWx0XCJdKSh7fSxlLnByb3BzLm1hcmtlck9wdGlvbnMpLHI9dC5wcm9wZXJ0aWVzLnByb2dyYW1zLG49dm9pZCAwLGw9dm9pZCAwO3JldHVybiByJiZyLmxlbmd0aCYmKHIubGVuZ3RoPjE/YS5maWxsQ29sb3I9XCJibGFja1wiOihuPXJbMF0uYWdlbmN5LnNwbGl0KFwiL1wiKSxsPW5bbi5sZW5ndGgtMV0sYS5maWxsQ29sb3I9X0FnZW5jeVN0b3JlMltcImRlZmF1bHRcIl0uZ2V0Q29sb3JTY2FsZSgpKGwpKSksX2xlYWZsZXQyW1wiZGVmYXVsdFwiXS5jaXJjbGVNYXJrZXIobyxhKX0sb25FYWNoRmVhdHVyZTpmdW5jdGlvbih0LG8pe28ub24oXCJjbGlja1wiLGZ1bmN0aW9uKG8pe2UuX2hhbmRsZUNsaWNrU2Nob29sKHQpfSl9fSkuYWRkVG8odCk7dC5maXRCb3VuZHMoby5nZXRCb3VuZHMoKSl9LF9vbkNoYW5nZTpmdW5jdGlvbigpe3RoaXMuc2V0U3RhdGUoe3NjaG9vbHM6X1NjaG9vbFN0b3JlMltcImRlZmF1bHRcIl0uZ2V0QWxsKCksYWdlbmNpZXM6X0FnZW5jeVN0b3JlMltcImRlZmF1bHRcIl0uZ2V0QWxsKCl9KX0sX2hhbmRsZUNsaWNrU2Nob29sOmZ1bmN0aW9uKGUpe3RoaXMuc2V0U3RhdGUoe3NlbGVjdGVkU2Nob29sOmV9KX19KTtleHBvcnRzW1wiZGVmYXVsdFwiXT1MZWFybmluZ0NvbGxhYm9yYXRpdmVNYXA7IiwiXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBfcmVhY3Q9cmVxdWlyZShcInJlYWN0XCIpLF9yZWFjdDI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpLF9TY2hvb2xEZXRhaWw9cmVxdWlyZShcIi4vU2Nob29sRGV0YWlsXCIpLF9TY2hvb2xEZXRhaWwyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1NjaG9vbERldGFpbCksTWFwRHJhd2VyPV9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUNsYXNzKHtkaXNwbGF5TmFtZTpcIk1hcERyYXdlclwiLHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIse2NsYXNzTmFtZTpcIm1hcC1kcmF3ZXJcIn0sX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfU2Nob29sRGV0YWlsMltcImRlZmF1bHRcIl0se3NjaG9vbDp0aGlzLnByb3BzLnNjaG9vbH0pKX19KTtleHBvcnRzW1wiZGVmYXVsdFwiXT1NYXBEcmF3ZXI7IiwiXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBfcmVhY3Q9cmVxdWlyZShcInJlYWN0XCIpLF9yZWFjdDI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpLFNjaG9vbERldGFpbD1fcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVDbGFzcyh7ZGlzcGxheU5hbWU6XCJTY2hvb2xEZXRhaWxcIixyZW5kZXI6ZnVuY3Rpb24oKXtpZighdGhpcy5wcm9wcy5zY2hvb2wpcmV0dXJuITE7dmFyIGU9dGhpcy5wcm9wcy5zY2hvb2wucHJvcGVydGllcztyZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLHtjbGFzc05hbWU6XCJzY2hvb2wtZGV0YWlsXCJ9LF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJoMlwiLG51bGwsZS5GYWNpbGl0eU5hbWUpKX19KTtleHBvcnRzW1wiZGVmYXVsdFwiXT1TY2hvb2xEZXRhaWw7IiwiXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBfa2V5bWlycm9yPXJlcXVpcmUoXCJrZXltaXJyb3JcIiksX2tleW1pcnJvcjI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfa2V5bWlycm9yKTtleHBvcnRzW1wiZGVmYXVsdFwiXT0oMCxfa2V5bWlycm9yMltcImRlZmF1bHRcIl0pKHtTQ0hPT0xTX1NFVDpudWxsLEFHRU5DSUVTX1NFVDpudWxsfSk7IiwiXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fWZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oZSx0KXtpZighZSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIXR8fFwib2JqZWN0XCIhPXR5cGVvZiB0JiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB0P2U6dH1mdW5jdGlvbiBfaW5oZXJpdHMoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgdCk7ZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0JiZ0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksdCYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YoZSx0KTplLl9fcHJvdG9fXz10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgX2NyZWF0ZUNsYXNzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKXt2YXIgbj10W3JdO24uZW51bWVyYWJsZT1uLmVudW1lcmFibGV8fCExLG4uY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIG4mJihuLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxuLmtleSxuKX19cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gciYmZSh0LnByb3RvdHlwZSxyKSxuJiZlKHQsbiksdH19KCksX2ZsdXg9cmVxdWlyZShcImZsdXhcIiksX29iamVjdEFzc2lnbj1yZXF1aXJlKFwib2JqZWN0LWFzc2lnblwiKSxfb2JqZWN0QXNzaWduMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RBc3NpZ24pLEFwcERpc3BhdGNoZXI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBfY2xhc3NDYWxsQ2hlY2sodGhpcyx0KSxfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLE9iamVjdC5nZXRQcm90b3R5cGVPZih0KS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBfaW5oZXJpdHModCxlKSxfY3JlYXRlQ2xhc3ModCxbe2tleTpcImhhbmRsZVZpZXdBY3Rpb25cIix2YWx1ZTpmdW5jdGlvbihlKXt0aGlzLmRpc3BhdGNoKHtzb3VyY2U6XCJWSUVXX0FDVElPTlwiLGFjdGlvbjplfSl9fV0pLHR9KF9mbHV4LkRpc3BhdGNoZXIpO2V4cG9ydHNbXCJkZWZhdWx0XCJdPW5ldyBBcHBEaXNwYXRjaGVyOyIsIlwidXNlIHN0cmljdFwiO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntcImRlZmF1bHRcIjplfX1PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxleHBvcnRzLkxlYXJuaW5nQ29sbGFib3JhdGl2ZU1hcEFwcD12b2lkIDA7dmFyIF9yZWFjdD1yZXF1aXJlKFwicmVhY3RcIiksX3JlYWN0Mj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCksX3JlYWN0RG9tPXJlcXVpcmUoXCJyZWFjdC1kb21cIiksX3JlYWN0RG9tMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSksX3hoclByb21pc2U9cmVxdWlyZShcInhoci1wcm9taXNlXCIpLF94aHJQcm9taXNlMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF94aHJQcm9taXNlKSxfTGVhcm5pbmdDb2xsYWJvcmF0aXZlQWN0aW9ucz1yZXF1aXJlKFwiLi9hY3Rpb25zL0xlYXJuaW5nQ29sbGFib3JhdGl2ZUFjdGlvbnNcIiksX0xlYXJuaW5nQ29sbGFib3JhdGl2ZUFjdGlvbnMyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xlYXJuaW5nQ29sbGFib3JhdGl2ZUFjdGlvbnMpLF9MZWFybmluZ0NvbGxhYm9yYXRpdmVNYXA9cmVxdWlyZShcIi4vY29tcG9uZW50cy9MZWFybmluZ0NvbGxhYm9yYXRpdmVNYXBcIiksX0xlYXJuaW5nQ29sbGFib3JhdGl2ZU1hcDI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTGVhcm5pbmdDb2xsYWJvcmF0aXZlTWFwKSxMZWFybmluZ0NvbGxhYm9yYXRpdmVNYXBBcHA9ZXhwb3J0cy5MZWFybmluZ0NvbGxhYm9yYXRpdmVNYXBBcHA9ZnVuY3Rpb24oZSl7dmFyIHI9bmV3IF94aHJQcm9taXNlMltcImRlZmF1bHRcIl0sYT1uZXcgX3hoclByb21pc2UyW1wiZGVmYXVsdFwiXTtfcmVhY3REb20yW1wiZGVmYXVsdFwiXS5yZW5kZXIoX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfTGVhcm5pbmdDb2xsYWJvcmF0aXZlTWFwMltcImRlZmF1bHRcIl0sbnVsbCksZS5jb250YWluZXIpLHIuc2VuZCh7bWV0aG9kOlwiR0VUXCIsdXJsOmUuc2Nob29sc0pTT05VUkx9KS50aGVuKGZ1bmN0aW9uKGUpe19MZWFybmluZ0NvbGxhYm9yYXRpdmVBY3Rpb25zMltcImRlZmF1bHRcIl0uc2V0U2Nob29scyhlLnJlc3BvbnNlVGV4dC5mZWF0dXJlcyl9KSxhLnNlbmQoe21ldGhvZDpcIkdFVFwiLHVybDplLmFnZW5jaWVzSlNPTlVSTH0pLnRoZW4oZnVuY3Rpb24oZSl7X0xlYXJuaW5nQ29sbGFib3JhdGl2ZUFjdGlvbnMyW1wiZGVmYXVsdFwiXS5zZXRBZ2VuY2llcyhlLnJlc3BvbnNlVGV4dC5mZWF0dXJlcyl9KX07IiwiXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBfb2JqZWN0QXNzaWduPXJlcXVpcmUoXCJvYmplY3QtYXNzaWduXCIpLF9vYmplY3RBc3NpZ24yPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdEFzc2lnbiksX2Q9cmVxdWlyZShcImQzXCIpLF9kMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kKSxfZXZlbnRzPXJlcXVpcmUoXCJldmVudHNcIiksX0FwcERpc3BhdGNoZXI9cmVxdWlyZShcIi4uL2Rpc3BhdGNoZXIvQXBwRGlzcGF0Y2hlclwiKSxfQXBwRGlzcGF0Y2hlcjI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQXBwRGlzcGF0Y2hlciksX0xlYXJuaW5nQ29sbGFib3JhdGl2ZUNvbnN0YW50cz1yZXF1aXJlKFwiLi4vY29uc3RhbnRzL0xlYXJuaW5nQ29sbGFib3JhdGl2ZUNvbnN0YW50c1wiKSxfTGVhcm5pbmdDb2xsYWJvcmF0aXZlQ29uc3RhbnRzMj1faW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9MZWFybmluZ0NvbGxhYm9yYXRpdmVDb25zdGFudHMpLENIQU5HRV9FVkVOVD1cImNoYW5nZVwiLF9hZ2VuY2llcz1bXSxfYWdlbmN5Q29sb3JTY2FsZT1fZDJbXCJkZWZhdWx0XCJdLnNjYWxlLmNhdGVnb3J5MjAoKSxBZ2VuY3lTdG9yZT0oMCxfb2JqZWN0QXNzaWduMltcImRlZmF1bHRcIl0pKHt9LF9ldmVudHMuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSx7Z2V0QWxsOmZ1bmN0aW9uKCl7cmV0dXJuIF9hZ2VuY2llc30sZ2V0Q29sb3JTY2FsZTpmdW5jdGlvbigpe3JldHVybiBfYWdlbmN5Q29sb3JTY2FsZX0sZW1pdENoYW5nZTpmdW5jdGlvbigpe3RoaXMuZW1pdChDSEFOR0VfRVZFTlQpfSxhZGRDaGFuZ2VMaXN0ZW5lcjpmdW5jdGlvbihlKXt0aGlzLm9uKENIQU5HRV9FVkVOVCxlKX0scmVtb3ZlQ2hhbmdlTGlzdGVuZXI6ZnVuY3Rpb24oZSl7dGhpcy5yZW1vdmVMaXN0ZW5lcihDSEFOR0VfRVZFTlQsZSl9LGRpc3BhdGNoZXJJbmRleDpfQXBwRGlzcGF0Y2hlcjJbXCJkZWZhdWx0XCJdLnJlZ2lzdGVyKGZ1bmN0aW9uKGUpe3ZhciB0PWUuYWN0aW9uLG49dm9pZCAwO3N3aXRjaCh0LmFjdGlvblR5cGUpe2Nhc2UgX0xlYXJuaW5nQ29sbGFib3JhdGl2ZUNvbnN0YW50czJbXCJkZWZhdWx0XCJdLkFHRU5DSUVTX1NFVDpuPXQuYWdlbmNpZXMsX2FnZW5jaWVzPW4sX2FnZW5jeUNvbG9yU2NhbGUuZG9tYWluKF9hZ2VuY2llcy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUucHJvcGVydGllcy5zbHVnfSkpLEFnZW5jeVN0b3JlLmVtaXRDaGFuZ2UoKX1yZXR1cm4hMH0pfSk7ZXhwb3J0c1tcImRlZmF1bHRcIl09QWdlbmN5U3RvcmU7IiwiXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e1wiZGVmYXVsdFwiOmV9fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBfb2JqZWN0QXNzaWduPXJlcXVpcmUoXCJvYmplY3QtYXNzaWduXCIpLF9vYmplY3RBc3NpZ24yPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdEFzc2lnbiksX2V2ZW50cz1yZXF1aXJlKFwiZXZlbnRzXCIpLF9BcHBEaXNwYXRjaGVyPXJlcXVpcmUoXCIuLi9kaXNwYXRjaGVyL0FwcERpc3BhdGNoZXJcIiksX0FwcERpc3BhdGNoZXIyPV9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FwcERpc3BhdGNoZXIpLF9MZWFybmluZ0NvbGxhYm9yYXRpdmVDb25zdGFudHM9cmVxdWlyZShcIi4uL2NvbnN0YW50cy9MZWFybmluZ0NvbGxhYm9yYXRpdmVDb25zdGFudHNcIiksX0xlYXJuaW5nQ29sbGFib3JhdGl2ZUNvbnN0YW50czI9X2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTGVhcm5pbmdDb2xsYWJvcmF0aXZlQ29uc3RhbnRzKSxDSEFOR0VfRVZFTlQ9XCJjaGFuZ2VcIixfc2Nob29scz1bXSxTY2hvb2xTdG9yZT0oMCxfb2JqZWN0QXNzaWduMltcImRlZmF1bHRcIl0pKHt9LF9ldmVudHMuRXZlbnRFbWl0dGVyLnByb3RvdHlwZSx7Z2V0QWxsOmZ1bmN0aW9uKCl7cmV0dXJuIF9zY2hvb2xzfSxlbWl0Q2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5lbWl0KENIQU5HRV9FVkVOVCl9LGFkZENoYW5nZUxpc3RlbmVyOmZ1bmN0aW9uKGUpe3RoaXMub24oQ0hBTkdFX0VWRU5ULGUpfSxyZW1vdmVDaGFuZ2VMaXN0ZW5lcjpmdW5jdGlvbihlKXt0aGlzLnJlbW92ZUxpc3RlbmVyKENIQU5HRV9FVkVOVCxlKX0sZGlzcGF0Y2hlckluZGV4Ol9BcHBEaXNwYXRjaGVyMltcImRlZmF1bHRcIl0ucmVnaXN0ZXIoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hY3Rpb24sbj12b2lkIDA7c3dpdGNoKHQuYWN0aW9uVHlwZSl7Y2FzZSBfTGVhcm5pbmdDb2xsYWJvcmF0aXZlQ29uc3RhbnRzMltcImRlZmF1bHRcIl0uU0NIT09MU19TRVQ6bj10LnNjaG9vbHMsX3NjaG9vbHM9bixTY2hvb2xTdG9yZS5lbWl0Q2hhbmdlKCl9cmV0dXJuITB9KX0pO2V4cG9ydHNbXCJkZWZhdWx0XCJdPVNjaG9vbFN0b3JlOyIsImZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpe3RoaXMuX2V2ZW50cz10aGlzLl9ldmVudHN8fHt9LHRoaXMuX21heExpc3RlbmVycz10aGlzLl9tYXhMaXN0ZW5lcnN8fHZvaWQgMH1mdW5jdGlvbiBpc0Z1bmN0aW9uKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGV9ZnVuY3Rpb24gaXNOdW1iZXIoZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGV9ZnVuY3Rpb24gaXNPYmplY3QoZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lfWZ1bmN0aW9uIGlzVW5kZWZpbmVkKGUpe3JldHVybiB2b2lkIDA9PT1lfW1vZHVsZS5leHBvcnRzPUV2ZW50RW1pdHRlcixFdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyPUV2ZW50RW1pdHRlcixFdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHM9dm9pZCAwLEV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycz12b2lkIDAsRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM9MTAsRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7aWYoIWlzTnVtYmVyKGUpfHwwPmV8fGlzTmFOKGUpKXRocm93IFR5cGVFcnJvcihcIm4gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlclwiKTtyZXR1cm4gdGhpcy5fbWF4TGlzdGVuZXJzPWUsdGhpc30sRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGUpe3ZhciB0LGksbixzLHIsbztpZih0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pLFwiZXJyb3JcIj09PWUmJighdGhpcy5fZXZlbnRzLmVycm9yfHxpc09iamVjdCh0aGlzLl9ldmVudHMuZXJyb3IpJiYhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpe2lmKHQ9YXJndW1lbnRzWzFdLHQgaW5zdGFuY2VvZiBFcnJvcil0aHJvdyB0O3Rocm93IFR5cGVFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4nKX1pZihpPXRoaXMuX2V2ZW50c1tlXSxpc1VuZGVmaW5lZChpKSlyZXR1cm4hMTtpZihpc0Z1bmN0aW9uKGkpKXN3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDE6aS5jYWxsKHRoaXMpO2JyZWFrO2Nhc2UgMjppLmNhbGwodGhpcyxhcmd1bWVudHNbMV0pO2JyZWFrO2Nhc2UgMzppLmNhbGwodGhpcyxhcmd1bWVudHNbMV0sYXJndW1lbnRzWzJdKTticmVhaztkZWZhdWx0OnM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGkuYXBwbHkodGhpcyxzKX1lbHNlIGlmKGlzT2JqZWN0KGkpKWZvcihzPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxvPWkuc2xpY2UoKSxuPW8ubGVuZ3RoLHI9MDtuPnI7cisrKW9bcl0uYXBwbHkodGhpcyxzKTtyZXR1cm4hMH0sRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3ZhciBpO2lmKCFpc0Z1bmN0aW9uKHQpKXRocm93IFR5cGVFcnJvcihcImxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvblwiKTtyZXR1cm4gdGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KSx0aGlzLl9ldmVudHMubmV3TGlzdGVuZXImJnRoaXMuZW1pdChcIm5ld0xpc3RlbmVyXCIsZSxpc0Z1bmN0aW9uKHQubGlzdGVuZXIpP3QubGlzdGVuZXI6dCksdGhpcy5fZXZlbnRzW2VdP2lzT2JqZWN0KHRoaXMuX2V2ZW50c1tlXSk/dGhpcy5fZXZlbnRzW2VdLnB1c2godCk6dGhpcy5fZXZlbnRzW2VdPVt0aGlzLl9ldmVudHNbZV0sdF06dGhpcy5fZXZlbnRzW2VdPXQsaXNPYmplY3QodGhpcy5fZXZlbnRzW2VdKSYmIXRoaXMuX2V2ZW50c1tlXS53YXJuZWQmJihpPWlzVW5kZWZpbmVkKHRoaXMuX21heExpc3RlbmVycyk/RXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM6dGhpcy5fbWF4TGlzdGVuZXJzLGkmJmk+MCYmdGhpcy5fZXZlbnRzW2VdLmxlbmd0aD5pJiYodGhpcy5fZXZlbnRzW2VdLndhcm5lZD0hMCxjb25zb2xlLmVycm9yKFwiKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiBVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC5cIix0aGlzLl9ldmVudHNbZV0ubGVuZ3RoKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBjb25zb2xlLnRyYWNlJiZjb25zb2xlLnRyYWNlKCkpKSx0aGlzfSxFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uPUV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIsRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gaSgpe3RoaXMucmVtb3ZlTGlzdGVuZXIoZSxpKSxufHwobj0hMCx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9aWYoIWlzRnVuY3Rpb24odCkpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3ZhciBuPSExO3JldHVybiBpLmxpc3RlbmVyPXQsdGhpcy5vbihlLGkpLHRoaXN9LEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXt2YXIgaSxuLHMscjtpZighaXNGdW5jdGlvbih0KSl0aHJvdyBUeXBlRXJyb3IoXCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7aWYoIXRoaXMuX2V2ZW50c3x8IXRoaXMuX2V2ZW50c1tlXSlyZXR1cm4gdGhpcztpZihpPXRoaXMuX2V2ZW50c1tlXSxzPWkubGVuZ3RoLG49LTEsaT09PXR8fGlzRnVuY3Rpb24oaS5saXN0ZW5lcikmJmkubGlzdGVuZXI9PT10KWRlbGV0ZSB0aGlzLl9ldmVudHNbZV0sdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyJiZ0aGlzLmVtaXQoXCJyZW1vdmVMaXN0ZW5lclwiLGUsdCk7ZWxzZSBpZihpc09iamVjdChpKSl7Zm9yKHI9cztyLS0gPjA7KWlmKGlbcl09PT10fHxpW3JdLmxpc3RlbmVyJiZpW3JdLmxpc3RlbmVyPT09dCl7bj1yO2JyZWFrfWlmKDA+bilyZXR1cm4gdGhpczsxPT09aS5sZW5ndGg/KGkubGVuZ3RoPTAsZGVsZXRlIHRoaXMuX2V2ZW50c1tlXSk6aS5zcGxpY2UobiwxKSx0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXImJnRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsZSx0KX1yZXR1cm4gdGhpc30sRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIHQsaTtpZighdGhpcy5fZXZlbnRzKXJldHVybiB0aGlzO2lmKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpcmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMuX2V2ZW50cz17fTp0aGlzLl9ldmVudHNbZV0mJmRlbGV0ZSB0aGlzLl9ldmVudHNbZV0sdGhpcztpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHQgaW4gdGhpcy5fZXZlbnRzKVwicmVtb3ZlTGlzdGVuZXJcIiE9PXQmJnRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKHQpO3JldHVybiB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhcInJlbW92ZUxpc3RlbmVyXCIpLHRoaXMuX2V2ZW50cz17fSx0aGlzfWlmKGk9dGhpcy5fZXZlbnRzW2VdLGlzRnVuY3Rpb24oaSkpdGhpcy5yZW1vdmVMaXN0ZW5lcihlLGkpO2Vsc2UgaWYoaSlmb3IoO2kubGVuZ3RoOyl0aGlzLnJlbW92ZUxpc3RlbmVyKGUsaVtpLmxlbmd0aC0xXSk7cmV0dXJuIGRlbGV0ZSB0aGlzLl9ldmVudHNbZV0sdGhpc30sRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHQ9dGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHNbZV0/aXNGdW5jdGlvbih0aGlzLl9ldmVudHNbZV0pP1t0aGlzLl9ldmVudHNbZV1dOnRoaXMuX2V2ZW50c1tlXS5zbGljZSgpOltdfSxFdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5fZXZlbnRzKXt2YXIgdD10aGlzLl9ldmVudHNbZV07aWYoaXNGdW5jdGlvbih0KSlyZXR1cm4gMTtpZih0KXJldHVybiB0Lmxlbmd0aH1yZXR1cm4gMH0sRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5saXN0ZW5lckNvdW50KHQpfTsiXX0=
